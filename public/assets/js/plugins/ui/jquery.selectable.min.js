//
// jquery.selectable.js - Turn a collection of HTML elements into a selectable list
//
// Developed by Cory LaViska for A Beautiful Site, LLC
//
// Licensed under the MIT license: http://opensource.org/licenses/MIT
//
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(a),a}:e(jQuery)}(function(e){"use strict";function t(t){var a=this;e(a).data("options.selectable",t).on("click.selectable",t.items,function(t){e(t.target).parents().addBack().is("a")&&t.preventDefault(),u.call(a,this,t)})}function a(){e(this).removeData("disabled.selectable").removeData("lastChange.selectable").removeData("lastIndex.selectable").removeData("options.selectable").off("click.selectable")}function s(){var t=this,a=e(t).data("options.selectable");e(t).data("disabled.selectable",!0).find(a.items).addClass(a.disabledClass)}function l(){var t=this,a=e(t).data("options.selectable");e(t).removeData("disabled.selectable").find(a.items).removeClass(a.disabledClass)}function i(){var t=this,a=e(t).data("options.selectable"),s=c.call(t),l=e(t).data("lastChange.selectable");l&&l===s||a.change&&a.change.call(t,s,n.call(t,!0))}function c(){var t=this,a=e(t).data("options.selectable"),s=[];return e(t).find(a.items+"."+a.selectedClass).each(function(){s.push(a.getValue.call(this))}),a.multiple?s:s[0]}function n(t){var a=this,s=e(a).data("options.selectable"),l=[];return t===!0?e(a).find(s.items+"."+s.selectedClass).toArray():void 0===t||null===t||t===!1?e(a).find(s.items).toArray():("string"==typeof t&&(t=[t]),e(a).find(s.items).each(function(){e.inArray(s.getValue.call(this),t)>-1&&l.push(this)}),l)}function d(){var t=this,a=e(t).data("options.selectable");a.multiple&&(e(t).find(a.items).addClass(a.selectedClass),i.call(t))}function o(){var t=this,a=e(t).data("options.selectable");e(t).find(a.items).removeClass(a.selectedClass),i.call(t)}function r(t){var a=this,s=e(a).data("options.selectable");"string"==typeof t&&(t=[t]),s.multiple||(t=[t[0]]),e(a).find(s.items).each(function(){e(this).toggleClass(s.selectedClass,e.inArray(s.getValue.call(this),t)>-1)}),i.call(a)}function u(t,a){var s,l,n=this,d=e(n).data("options.selectable"),o=e(n).find(d.items),r=e(n).data("lastIndex.selectable");for(l=0;l<o.length;l++)e(o).eq(l).is(t)&&(s=l);e(n).data("disabled.selectable")||d.click&&d.click.call(n,d.getValue.call(t),t,a)===!1||(d.multiple&&a.shiftKey&&void 0!==r?e(n).find(d.items).slice(Math.min(r,s),Math.max(r,s)+1).toggleClass(d.selectedClass,!e(t).hasClass(d.selectedClass)):d.multiple&&(a.metaKey||a.ctrlKey)?e(t).toggleClass(d.selectedClass):(e(n).find("."+d.selectedClass).length>1?e(t).addClass(d.selectedClass):e(t).toggleClass(d.selectedClass),e(n).find(d.items).not(t).removeClass(d.selectedClass)),i.call(n),e(n).data("lastIndex.selectable",s).data("lastChange.selectable",c.call(n)))}e.selectable={defaults:{getValue:function(){return e(this).attr("data-value")},items:"li",multiple:!1,disabledClass:"disabled",selectedClass:"selected"}},e.fn.selectable=function(u,f){switch("object"==typeof u&&(f=u),u){case"change":return e(this).each(i);case"destroy":return e(this).each(a);case"disable":return e(this).each(f===!1?l:s);case"getElements":return n.call(this,f);case"selectAll":return e(this).each(d);case"selectNone":return e(this).each(o);case"value":return void 0===f?c.call(this):e(this).each(function(){r.call(this,f)});default:return e(this).each(function(){t.call(this,e.extend({},e.selectable.defaults,f))})}}});